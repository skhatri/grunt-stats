/*
 * grunt-stats
 * http://github.com/t32k/grunt-stats
 * http://en.t32k.me
 *
 * Copyright (c) 2013 Koji Ishimoto
 * Licensed under the MIT license.
 */

'use strict';

module.exports = function (grunt) {
	var fs = require('fs');
	var path = require('path');
	// var bytes = require('bytes');
	var moment = require('moment');


	var childProcess = require('child_process');
	var phantomjs = require('phantomjs');
	var binPath = phantomjs.path;

	var childArgs = [
	  path.join(__dirname, 'phantomjs-script.js'),
	  'some other argument (passed to phantomjs script)'
	];

	childProcess.execFile(binPath, childArgs, function(err, stdout, stderr) {
	  
	  
	})

	grunt.registerMultiTask('stats', 'Statics of Static files', function() {

		var files = this.filesSrc;

		files.forEach(function(filepath) {
		    var name = String(filepath);
		    var size = fs.statSync(name).size;

		    grunt.log.writeln(name);
		    grunt.log.ok(moment().format('YYYY-MM-DD HH:mm:ss'));
		   	grunt.log.ok(size);

		});

	});

	// _gaq.push(['_trackEvent', 'Stats', 'FILENAME', 'DATE', SIZE, true]);
};